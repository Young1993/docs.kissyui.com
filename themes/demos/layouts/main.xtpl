<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>{{{title}}}</title>
	<link rel="stylesheet" href="../../assets/css/base.css">
	<link rel="shortcut icon" href="../../assets/assets/favicon.ico">
	<link rel="stylesheet" href="../assets/css/highlight.min.css"/>
	<link rel="stylesheet" href="../../assets/css/component.css">
	<script type="text/javascript" src="http://g.tbcdn.cn/kissy/k/1.4.2/seed-min.js"></script>
	<link rel="stylesheet" href="http://docs.kissyui.com/1.4/source/raw/demo/tabs/assets/toolbar-dpl.css">
	<link rel="stylesheet" href="http://docs.kissyui.com/1.4/source/raw/demo/split-button/assets/button-dpl.css">
	<link rel="stylesheet" href="http://docs.kissyui.com/1.4/source/raw/demo/tabs/assets/dpl.css">
	<script src="../assets/js/ace-editor/ace.js"></script>
</head>
<body>
	{{{include ("./header")}}}
		<div id="container">
			<h1>Demo: {{{title}}}</h1>
			<div id="main-content">
				<div class="ks-tabs ks-tabs-top">
	                <div class="ks-tabs-bar">
	                    <div class="ks-tabs-tab ks-button ks-tabs-tab-selected">Source</div>
	                    <div class="ks-tabs-tab ks-button">Output</div>
	                </div>
	                <div class="ks-tabs-body">
	                    <div class="ks-tabs-panel ks-tabs-panel-selected">
	                        <div id="editor">
								{{demoCode}}
							</div>
	                    </div>
	                    <div class="ks-tabs-panel">
	                        <iframe id="output" frameborder="0">
	                        	
	                        </iframe>
	                    </div>
	                </div>
       			</div>
			</div>
			<div id="sidebar">
				{{{sidebarContent}}}
			</div>
		</div>
	{{{include ("./footer")}}}

	<script>
		KISSY.use('node,tabs',function(S, Node, Tabs){
			var $ = Node.all;

			var editor = ace.edit("editor");
		    editor.setTheme("ace/theme/clouds");
		    editor.getSession().setMode("ace/mode/html");

		    new Tabs({
		    	srcNode : $('.ks-tabs'),
		    	listeners:{
		            afterSelectedTabChange:function(e){
		            	if(e.newVal.get('content') === 'Output'){ //如果是切换到Output
		            		var iframeWindow = $('#output')[0].contentWindow;
		            		iframeWindow.document.body.innerHTML = '';
		    				iframeWindow.document.write(editor.getValue());
		            	}
		            }
		        },
		    }).render();	
		});
	</script>
</body>
</html>