	<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Overlay基本介绍 - KISSY v5.0 Documentation</title>
	<link rel="shortcut icon" href="/5.0/assets/favicon.ico">
	<link rel="stylesheet" href="/5.0/assets/css/bootstrap.css">
	<link rel="stylesheet" href="/5.0/assets/css/component.css">
	<link rel="stylesheet" href="/5.0/assets/css/custom.css">
	<link rel="stylesheet" href="/5.0/assets/css/github.css"/>
	<script type="text/javascript" src="http://g.tbcdn.cn/kissy/k/1.4.2/seed-min.js" data-config="{combine:true}"></script>
	<script src="/5.0/assets/js/ace-editor/ace.js"></script>
	<script src="/5.0/assets/js/ajax-load.js"></script>
	<script type="text/javascript" src="/5.0/assets/js/qrcodejs/qrcode.min.js"></script>
	
</head>
<body>
	<div class="container" id="container">
		<header class="header clearfix">
	<div class="logo">
		<a href="/5.0">
			<img src="/5.0/assets/img/logo.png" alt="">
		</a>
	</div>
	<div class="search">
		<gcse:search></gcse:search>
	</div>
	<div id="header-toolbar"></div>
</header>
<script type="text/javascript">
	KISSY.use('toolbar,button,menubutton', function(S, Toolbar){
			new Toolbar({
				render : '#header-toolbar',
				children : [
					{
						content : 'Home',
						listeners : {
							click : function(){
								window.location.href ='/5.0';
							}
						}
					},
					{
						content : 'Quick Start',
						listeners : {
							click : function(){
								window.location.href ='/5.0/quick-start.html';
							}
						}
					},
					{
						content : 'Docs',
						xclass : 'menu-button',
						menu : {
							children : [
								{
									content : 'Guides',
									listeners : {
										click : function(){
											window.location.href ='/5.0/guides';
										}
									}
								},
								{
									content : 'API Docs',
									listeners : {
										click : function(){
											window.location.href ='/5.0/api';
										}
									}
								},{
									content : 'Demos',
									listeners : {
										click : function(){
											window.location.href ='/5.0/demos';
										}
									}
								}
							]
						},
						matchElWidth : false
					},
					{
						content : 'Contribute',
						listeners : {
							click : function(){
								window.location.href = 'https://github.com/kissyteam/kissy/blob/master/CONTRIBUTING.md';
							}
						}
					},
					{
						content : 'More',
						xclass : 'menu-button',
						menu : {
							children : [
								{
									content : 'FAQ',
									listeners : {
										click : function(){
											window.location.href ='/5.0/more/faq.html';
										}
									}
								},
								{
									content : 'Gallery',
									listeners : {
										click : function(){
											window.location.href = 'http://gallery.kissyui.com/';
										}
									}
								},
								{
									content : 'Kissy Blog',
									listeners : {
										click : function(){
											window.location.href = 'http://blog.kissyui.com/';
										}
									}
								},
								{
									content : 'KMC',
									listeners : {
										click : function(){
											window.location.href = 'https://github.com/daxingplay/grunt-kmc/blob/master/README.md';
										}
									}
								},
								{
									content : 'ABC',
									listeners : {
										click : function(){
											window.location.href = 'http://abc.f2e.taobao.net/';
										}
									}
								},
								{
									content : 'Clam',
									listeners : {
										click : function(){
											window.location.href = 'https://github.com/jayli/generator-clam/blob/master/README.md';
										}
									}
								}
							]
						},
						matchElWidth : false
					}
				]
			}).render();
		});
</script>
		<div class="row">
			<div class="col-md-9" id="main-content">
				<p></p>
<h1>Overlay基本介绍</h1><blockquote>
<p>悬浮的对话框是KISSY核心组件中完整的利用了KISSY的面向对象的组件，是典型的组件拼装模式，继承和派生的用法非常值得学习和借鉴。</p>
</blockquote>
<p>Overlay 由三个内部组件派生出来，Control、Align、Position，Controller又包含另外两个基础组件UIBase和Box。因此Overlay的实例方法大都是组装来的。<code>Overlay</code>对象下挂接两个由他派生出的类：<code>Dialog</code>和<code>Popup</code>，这两个实现是最常用的。</p>
<p>引用方法：</p>
<pre><code>KISSY.<span class="hljs-keyword">use</span>(<span class="hljs-string">'overlay'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(S,Overlay)</span></span>{
    <span class="hljs-comment">// use Overlay</span>
});
</code></pre><h2 id="1">一个简单的调用</h2><pre><code>KISSY.<span class="hljs-keyword">use</span>(<span class="hljs-string">'overlay'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(S,Overlay)</span></span>{
    <span class="hljs-comment">//通过dom元素新建立popup</span>
    <span class="hljs-keyword">var</span> popup = <span class="hljs-keyword">new</span> Overlay.Popup({
        srcNode:<span class="hljs-string">'#dpop'</span>,
        trigger : <span class="hljs-string">'#img-download'</span>,<span class="hljs-comment">//配置Popup的触发器</span>
        triggerType : <span class="hljs-string">'mouse'</span>,    <span class="hljs-comment">//触发类型，鼠标触碰时触发</span>
        align : {
            node : <span class="hljs-string">'#img-download'</span>,
            points : [<span class="hljs-string">'tc'</span>, <span class="hljs-string">'bc'</span>],
            offset : [<span class="hljs-number">0</span>, <span class="hljs-number">50</span>]
        }
    });
});
</code></pre><p>初始化OVerlay之前应当先加上初始样式</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-title">style</span>&gt;</span><span class="css">
    <span class="hljs-class">.ks-overlay</span> <span class="hljs-rules">{
        <span class="hljs-rule"><span class="hljs-attribute">position</span>:<span class="hljs-value">absolute</span></span>;
        <span class="hljs-rule"><span class="hljs-attribute">left</span>:<span class="hljs-value">-<span class="hljs-number">9999px</span></span></span>;
        <span class="hljs-rule"><span class="hljs-attribute">top</span>:<span class="hljs-value">-<span class="hljs-number">9999px</span></span></span>;
    <span class="hljs-rule">}</span></span>
    <span class="hljs-class">.ks-overlay-hidden</span> <span class="hljs-rules">{
        <span class="hljs-rule"><span class="hljs-attribute">visibility</span>:<span class="hljs-value"> hidden</span></span>;
    <span class="hljs-rule">}</span></span>

    <span class="hljs-class">.ks-overlay-mask-hidden</span> <span class="hljs-rules">{
        <span class="hljs-rule"><span class="hljs-attribute">display</span>:<span class="hljs-value"> none</span></span>;
    <span class="hljs-rule">}</span></span>

    <span class="hljs-class">.ks-overlay-shown</span> <span class="hljs-rules">{
        <span class="hljs-rule"><span class="hljs-attribute">visibility</span>:<span class="hljs-value"> visible</span></span>;
    <span class="hljs-rule">}</span></span>

    <span class="hljs-class">.ks-overlay-mask-shown</span><span class="hljs-rules">{
        <span class="hljs-rule"><span class="hljs-attribute">display</span>:<span class="hljs-value"> block</span></span>;
    <span class="hljs-rule">}</span></span>
</span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
</code></pre><p>其中Dialog的DOM结构为经典的三段式</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">'dialog'</span>&gt;</span> <span class="hljs-comment">&lt;!-- 对话框根节点 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">'content'</span>&gt;</span> <span class="hljs-comment">&lt;!-- 对话框内容节点 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">'header'</span>&gt;</span> <span class="hljs-comment">&lt;!-- 对话框标题节点 --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">'body'</span>&gt;</span> <span class="hljs-comment">&lt;!-- 对话框体节点 --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">'footer'</span>&gt;</span> <span class="hljs-comment">&lt;!-- 对话框底部节点 --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre><hr>
<h2 id="2">Overlay/Dialog/Popup API</h2><h3 id="2.1">配置参数</h3><p><code>new Overlay(config)</code></p>
<h4>prefixCls</h4><p>继承自Controller，组件css样式的前缀，默认 “ks-” . 例如假设组件为 menu ，则该组件内的样式类名为 {prefixCls}menu，默认为 “ks-menu”.可用于实现自定义皮肤.</p>
<h4>srcNode</h4><p>继承自UIBase，当前组件在 dom 树中已经存在的节点.</p>
<h4>plugins</h4><p>数组，给出插件，插件格式参照<a href="/5.0/guides/base/index.html">Base</a>。</p>
<h4>width</h4><p>继承自Box，组件的宽度，单位为像素</p>
<h4>height</h4><p>继承自Box，组件的高度，单位为像素</p>
<h4>elCls</h4><p>继承自Box，附加给根节点的样式类</p>
<h4>content</h4><p>继承自Box，设置内容html</p>
<h4>zIndex</h4><p>继承自Position，Number类型，组件根节点的z-index值，默认为9999</p>
<h4>x</h4><p>继承自Position，Number类型， 组件根节点相对于文档根节点的 x 坐标.</p>
<h4>y</h4><p>继承自Position，Number类型， 组件根节点相对于文档根节点的 y 坐标.</p>
<h4>xy</h4><p>继承自Position，数组，相当于将数组第一个元素设置为 x 的值, 将数组的第二个元素设置为 y 的值.</p>
<h4>align</h4><p>继承自Align，JSON对象，组件节点对齐的相关配置, 例如：</p>
<pre><code>{
    node: <span class="hljs-constant">null</span>,        <span class="hljs-comment"> // 类型选择器字符串, 对齐参考元素, falsy 值为可视区域</span>
    points: [<span class="hljs-string">'tr'</span>,<span class="hljs-string">'tl'</span>],<span class="hljs-comment"> // 类型字符串数组, 表示 overlay 的 tl 与参考节点的 tr 对齐</span>
    <span class="hljs-built_in">offset</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>],     <span class="hljs-comment"> // 类型整数数组, 表示 overlay 最终位置与经 node 和 points 计算后位置的偏移,</span>
                       <span class="hljs-comment"> // 数组第一个元素表示 x 轴偏移, 第二个元素表示 y 轴偏移.</span>
    overflow:{
        adjustX:<span class="hljs-number">1</span>,<span class="hljs-comment"> // 当对象不能处于可显示区域时，自动调整横坐标</span>
        adjustY:<span class="hljs-number">1</span><span class="hljs-comment"> // 当对象不能处于可显示区域时，自动调整纵坐标</span>
    }
}
</code></pre><p>points 字符串数组元素的取值范围为 t,b,c 与 l,r,c 的两两组合, 分别表示 top,bottom,center 与 left,right,center 的两两组合, 可以表示 9 种取值范围，如图，第一个字符取值 t,b,c , 第二个字符取值 l,r,c. </p>
<p><img src="http://docs.kissyui.com/1.4/source/raw/api/overlay/align.png" alt=""></p>
<h4>effect</h4><p>JSON对象，显示隐藏效果，属性包括</p>
<ul>
<li>target，KISSY Node或者字符串，动画参考元素</li>
<li>effect，字符串，可取值 ‘fade’(渐隐显示), ‘slide’(滑动显示).</li>
<li>easing，字符串，同 <a href="/5.0/guides/anim/index.html">KISSY.Anim</a> 的 easing 参数配置.</li>
<li>duration，数字类型，动画持续时间, 以秒为单位.</li>
</ul>
<p>举例：</p>
<pre><code>{
    target:<span class="hljs-string">''</span>,        <span class="hljs-comment">// {String|KISSY.Node} - 可选，动画的参考元素</span>
    effect:<span class="hljs-string">'none'</span>,    <span class="hljs-comment">// {String} - 可选, 默认为'none', 'none'(无特效), 'fade'(渐隐显示), 'slide'(滑动显示).</span>
    easing:<span class="hljs-string">''</span>,        <span class="hljs-comment">// {String} - 可选, 同 KISSY.Anim 的 easing 参数配置.</span>
    <span class="hljs-built_in">duration</span>:<span class="hljs-number">3</span>        <span class="hljs-comment">// {Number} - 可选, 动画持续时间, 以秒为单位.</span>
}
</code></pre><h4>closable</h4><p>Boolean类型，对话框右上角是否包括关闭按钮</p>
<h4>closeAction</h4><p>字符串，点击关闭按钮的动作。默认 “hide” 隐藏，也可设置 “destroy” 销毁该组件.</p>
<h4>elBefore</h4><p>Node节点类型，组件根节点的渲染到该节点之前.</p>
<h4>render</h4><p>Node节点类型， 默认 S.all(“body”)，组件根节点的渲染为该节点最后一个节点.</p>
<h4>mask</h4><p>Boolean或JSON对象，组件显示时是否使用遮罩层盖住页面其他元素，如果为JSON对象，属性包括：</p>
<ul>
<li>closeOnClick，Boolean值，点击遮罩层是否关闭 overlay。</li>
<li>effect，字符串类型，遮罩层显示隐藏效果. (取值 ‘fade’,’slide’)</li>
<li>duration，Number类型，效果持续时间. 单位秒</li>
</ul>
<h4>headerContent <code>Dialog</code>专有属性</h4><p>组件的标题 html.</p>
<h4>bodyContent <code>Dialog</code>专有属性</h4><p>组件的正文 html.</p>
<h4>footerContent <code>Dialog</code>专有属性</h4><p>组件的底部 html.</p>
<h4>trigger  <code>Popup</code>专有属性</h4><p>触点集合，可以是选择器、字符串，原生节点，Nodelist等</p>
<h4>triggerType  <code>Popup</code>专有属性</h4><p>默认为 ‘click’, 触发类型, 可选 ‘click’, ‘mouse’.</p>
<h4>mouseDelay  <code>Popup</code>专有属性</h4><p>单位秒. 可选, triggerType 为 mouse 时, Popup 显示的延迟时间, 默认为 0.1.</p>
<h4>toggle  <code>Popup</code>专有属性</h4><p>triggerType 为 click 时, Popup 是否有toggle功能，默认为false，不开启</p>
<hr>
<h3 id="2.2">实例属性</h3><h4>x</h4><p>x 坐标</p>
<h4>y</h4><p>y 坐标</p>
<h4>xy</h4><p>xy坐标数组</p>
<h4>align</h4><p>对其方式，数组类型</p>
<h4>closable</h4><p>布尔类型，右上角是否有关闭按钮</p>
<h4>visible</h4><p>布尔类型，是否处于显示状态</p>
<h4>el</h4><p>Node节点类型，该组件的根节点. 注意调用 render() 后才可以取得.</p>
<h4>contentEl</h4><p>Node节点类型，该组件的内容所在节点，一般和 el 相同，注意调用 render() 后才可以取得.</p>
<h4>maskNode</h4><p>Node节点类型，遮罩层节点</p>
<h4>header <code>Dialog</code>专有</h4><p>头部内容html</p>
<h4>body <code>Dialog</code>专有</h4><p>正文html</p>
<h4>headerContent <code>Dialog</code>专有</h4><p>组件的头部标题html</p>
<h4>bodyContent <code>Dialog</code>专有</h4><p>组件的正文html</p>
<h4>footerContent <code>Dialog</code>专有</h4><p>尾部html</p>
<h4>currentTrigger <code>Popup</code>专有</h4><p>当前的 trigger 节点</p>
<hr>
<h3 id="2.3">实例方法</h3><p>Dialog和Popup中都包含同样的实例方法</p>
<h4>plugin(plugin)</h4><p>继承自Base，安装指定插件，参数<code>plugin</code>为Function或者Object，是插件构造器或者插件对象，返回自身,具体参照<a href="/5.0/guides/base/index.html">Base</a></p>
<h4>unplugin(plugin)</h4><p>继承自Base，卸载插件，参数为字符串或对象，是指定插件的id或者插件对象。返回自身。具体参照<a href="/5.0/guides/base/index.html">Base</a></p>
<h4>render()</h4><p>继承自UIBase，将组件渲染到dom树中</p>
<h4>destroy()</h4><p>继承自Base，销毁组件</p>
<h4>show()</h4><p>继承自Box，渲染该组件并显示出来.</p>
<h4>hide()</h4><p>继承自Box，隐藏该组件并显示出来.</p>
<h4>center()</h4><p>继承自Align，将节点置于屏幕的中央。</p>
<h4>move(x,y)</h4><p>继承自Position，将组件置于相对于文档左上角的坐标偏移量的位置。</p>
<h4>loading()</h4><p>显示菊花</p>
<h4>unloading()</h4><p>隐藏菊花</p>
<hr>
<h3 id="2.4">实例事件</h3><h4>hide</h4><p>继承自UIBase，当组件隐藏时触发</p>
<h4>show</h4><p>继承自UIBase，当组件显示时触发</p>
<h4>beforeVisibleChange</h4><p>继承自UIBase，当组件隐藏或显示前触发，事件对象上挂两个属性：</p>
<ul>
<li>ev.newVal (Boolean) – 将要隐藏时为 false, 将要显示时为 true</li>
<li>ev.prevVal (Boolean) – 当前悬浮层显示与否</li>
</ul>
<p>返回 false 时, 则会阻止将要进行的显示或隐藏动作.</p>
<h4>afterRenderUI</h4><p>继承自UIBase，当组件被渲染 dom 时触发</p>
<h4>afterCurrentTriggerChange <code>Popup</code>专有</h4><p>当 currentTrigger 改变后触发，事件对象挂载属性</p>
<ul>
<li>e.newVal ({KISSY.Node}) – 新的 trigger 元素</li>
</ul>

				<div id="disqus_thread"></div>
				<!-- 这个隐藏的a标签用于实现局部刷新时更新右侧sidebar的api链接 -->
				<a id="apilink" href="../../api/classes/Overlay.html" style="display:none;"></a>
			</div>
			<div class="col-md-3" id="sidebar">
				<a class="link-apidocs btn btn-primary" href="../../api/classes/Overlay.html">API Docs</a>
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title">Outline</h3>
					</div>
					<div class="panel-body">
						<ul class="outline">
							<li class="level2"><a href="#1">一个简单的调用</a></li><li class="level2"><a href="#2">Overlay/Dialog/Popup API</a></li><li class="level3"><a href="#2.1">配置参数</a></li><li class="level3"><a href="#2.2">实例属性</a></li><li class="level3"><a href="#2.3">实例方法</a></li><li class="level3"><a href="#2.4">实例事件</a></li>
						</ul>
					</div>
				</div>
				<div class="panel panel-primary ajax-load">
					<div class="panel-heading">
						<h3 class="panel-title">Features</h3>
					</div>
					<div class="panel-body">
						<p><a href="../../guides/overlay/index.html">Overlay基本介绍</a></p>
					</div>
				</div>
				<div class="panel panel-primary ajax-load">
					<div class="panel-heading">
						<h3 class="panel-title">Demos</h3>
					</div>
					<div class="panel-body">
						
					</div>
				</div>
			</div>
			<div id="disqus_thread"></div>
<script>
    if((window.location.hostname.indexOf("kissyui.com")!=-1 )&& window.localStorage.getItem("kissy-commment")!="0"){
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'kissy-docs'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
     //var disqus_identifier = '/anim';
     //var disqus_url = window.location;

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    }
</script>
<script>
    window.onload = function(){
        (function() {
        var cx = '003618533255763067140:5nkycw1pbey';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    }
</script>
		</div>
	</div>
</body>
</html>